syntax = "proto3";

package events;
option go_package = "github.com/ahinestrog/mybookstore/proto/gen/events;eventspb";

import "common.proto";

// order.created
message OrderCreated {
  int64 order_id = 1;
  int64 user_id = 2;
  repeated Item items = 3;
  common.Money total = 4;

  message Item {
    int64 book_id = 1;
    int32 qty = 2;
    common.Money unit_price = 3;
  }
}

// stock.reserved / stock.failed / stock.confirmed / stock.released
message StockReserved   { int64 order_id = 1; }
message StockFailed     { int64 order_id = 1; string reason = 2; }
message StockConfirmed  { int64 order_id = 1; }
message StockReleased   { int64 order_id = 1; }

// payment.succeeded / payment.failed
message PaymentSucceeded { int64 order_id = 1; string payment_id = 2; }
message PaymentFailed    { int64 order_id = 1; string reason = 2; }
