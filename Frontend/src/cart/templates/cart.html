{{define "title"}}Carrito Â· MyBookStore{{end}}
{{define "content"}}
<section class="cart-page">
  <h2 class="cart-title">ðŸ›’ Tu carrito</h2>

  {{if .Msg}}
  <div class="alert success">{{.Msg}}</div>
  {{end}}

  {{if .Items}}
  <div class="cart-list">
    {{range .Items}}
    <div class="cart-item card">
      <div class="cart-info">
        <div>
          <h3>{{.Title}}</h3>
          <p class="author">ID: {{.BookID}}</p>
          <p class="qty">Cantidad: <strong>{{.Qty}}</strong></p>
          <p class="price">Precio: {{call $.FormatCOP .Unit.Cents}}</p>
          <p class="subtotal">Subtotal: {{call $.FormatCOP .Line.Cents}}</p>
        </div>
      </div>

      <div class="cart-actions">
        <form action="add" method="post" class="inline">
          <input type="hidden" name="book_id" value="{{.BookID}}">
          <input type="hidden" name="qty" value="1">
          <button class="btn small">+1</button>
        </form>

        <form action="remove" method="post" class="inline">
          <input type="hidden" name="book_id" value="{{.BookID}}">
          <input type="hidden" name="qty" value="1">
          <button class="btn small">-1</button>
        </form>

        <form action="remove" method="post" class="inline">
          <input type="hidden" name="book_id" value="{{.BookID}}">
          <input type="hidden" name="qty" value="0">
          <button class="btn danger small">Eliminar</button>
        </form>
      </div>
    </div>
    {{end}}
  </div>

  <div class="cart-total">
    <p>Total: <strong>{{call .FormatCOP .Total.Cents}}</strong></p>
    <div class="cart-buttons">
      {{if .LoggedIn}}
        <form action="checkout" method="post">
          <button class="btn primary">ðŸ’³ Comprar</button>
        </form>
      {{else}}
        <a class="btn primary" href="/user/login?from=/cart/">Inicia sesiÃ³n para comprar</a>
      {{end}}
      <form action="clear" method="post">
        <button class="btn danger">Vaciar carrito</button>
      </form>
      <a href="/catalog/" class="btn">Seguir comprando</a>
    </div>
  </div>
  {{else}}
  <div class="card empty-cart">
    <h3>Tu carrito estÃ¡ vacÃ­o ðŸ˜•</h3>
    <a href="/catalog/" class="btn primary">Explorar catÃ¡logo</a>
  </div>
  {{end}}
</section>
{{end}}

{{ template "layout.html" . }}
